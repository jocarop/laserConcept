/* added support for specifying iframe height and width in other than px -- JJC Aug 14, 2012 */
(function(c){if(c.ShowIfrmDailog){return}c.escapeHTML=function(d){var e=document.createElement("div");e.appendChild(document.createTextNode(d));return e.innerHTML};c.documentCenter=function(d){d=c(d);d.css({position:"absolute",left:Math.max((document.documentElement.clientWidth-d.width())/2+document.documentElement.scrollLeft,0)+"px",top:Math.max((document.documentElement.clientHeight-d.height())/2+document.documentElement.scrollTop,0)+"px"})};c.getMargins=function(k,g){var i=jQuery(k);var h=i.css("marginTop")||"";var j=i.css("marginRight")||"";var d=i.css("marginBottom")||"";var f=i.css("marginLeft")||"";if(g){return{t:parseInt(h)||0,r:parseInt(j)||0,b:parseInt(d)||0,l:parseInt(f)}}else{return{t:h,r:j,b:d,l:f}}};function b(d,e){return d.replace(/\$\{([\w]+)\}/g,function(g,f){var h=e[f];if(typeof(h)!="undefined"){return h}else{return g}})}var a=false;c.ShowIfrmDailog=function(e,t){if(a){return}a=true;t=c.extend({width:"600px",height:"400px",caption:"",enabledrag:true,onclose:null},t);if(typeof t.width=="number"){t.width=t.width+"px";t.height=t.height+"px"}var f=(new Date()).valueOf();t.newid=f;t.caption=c.escapeHTML(t.caption);var k=c("<div id='dailog_"+f+"' class='bbit-window bbit-window-plain'></div>");var m="<div id='dailog_head_${newid}' class='bbit-window-tl'><div class='bbit-window-tr'><div class='bbit-window-tc'><div style='mozuserselect: none; khtmluserselect: none' class='bbit-window-header' unselectable='on'><div class='bbit-tool bbit-tool-close'>&nbsp;</div><span class='bbit-window-header-text'>${caption}</span></div></div></div></div>";var s="<div class='bbit-window-bwrap'><div class='bbit-window-ml'><div class='bbit-window-mr'><div class='bbit-window-mc'><div id='dailog_body_${newid}' style='width: ${width}px; height: ${height}px' class='bbit-window-body'>${iframehtml}</div></div></div></div><div class='bbit-window-bl'><div class='bbit-window-br'><div class='bbit-window-bc'><div class='bbit-window-footer'></div></div></div></div></div>";var n='<iframe id="dailog_iframe_${newid}" border="0" frameBorder="0" src="${url}" style="border:none;width:${width};height:${height}"></iframe>';t.url=e+(e.indexOf("?")>-1?"&":"?")+"_="+(new Date()).valueOf();var l=[];t.iframehtml=b(n,t);l.push(b(m,t));l.push(b(s,t));if(t.width.substring(t.width.length-1)=="%"){var r=t.width.substring(t.width.length-1)}else{var r=t.width.substring(t.width.length-2)}var h;switch(r){case"px":h=16;break;case"em":break;case"pt":h=16*0.75;break;case"in":h=16*0.0133125;break;case"mm":h=16*0.3381375;break;case"cm":h=16*0.03381375;break;case"%":break;default:h=0;break}var g=(parseInt(t.width)+h)+r;k.css({width:g}).html(l.join(""));var q=k.find("div.bbit-tool-close").hover(function(u){c(this).addClass("hover")},function(u){c(this).removeClass("hover")}).click(i);var p=c.getMargins(document.body,true);var d=c("<div></div>").css({position:"absolute",left:0,top:0,width:Math.max(document.documentElement.clientWidth,document.body.scrollWidth),height:Math.max(document.documentElement.clientHeight,document.body.scrollHeight+p.t+p.b),zIndex:"998",background:"#fff",opacity:"0.5"}).bind("contextmenu",function(){return false}).appendTo(document.body);var o=false;if(t.enabledrag){if(c.fn.easydrag){k.addClass("bbit-window-draggable").easydrag(false).ondrag(function(u){if(o==false){o=true;c("#dailog_body_"+f).css("visibility","hidden")}}).ondrop(function(u){o=false;c("#dailog_body_"+f).css("visibility","visible")})}}k.appendTo(document.body);c.documentCenter(k);if(c.browser.msie6){c(document.body).addClass("hiddenselect");document.getElementById("dailog_iframe_"+f).src=t.url}function i(u){c.closeIfrm()}function j(){return false}c.closeIfrm=function(v,u){c.closeIfrm=j;if(c.browser.msie6){c(document.body).removeClass("hiddenselect")}d.remove();q.remove();k.remove();a=false;q=d=k=null;v&&v();if(u&&t.onclose){t.onclose();t.onclose=null}}}})(jQuery);