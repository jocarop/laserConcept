(function(b){b.fn.DhoverClass=function(d){return b(this).hover(function(){b(this).addClass(d)},function(){b(this).removeClass(d)})};function a(j,e,g){var l=j.offset();var d=j.outerHeight();var i={left:l.left,top:l.top+d-1};var k=document.documentElement.clientWidth;var f=document.documentElement.clientHeight;if((i.left+e)>=k){i.left=k-e-2}if((i.top+g)>=f&&k>i.top){i.top=l.top-g-2}return i}function c(){return false}b.fn.dropdown=function(j){var f=b.extend({vinputid:null,cssClass:"bbit-dropdown",containerCssClass:"dropdowncontainer",dropwidth:false,dropheight:"auto",autoheight:true,selectedchange:false,items:[],selecteditem:false,parse:{name:"list",render:function(l){var m=this.target;var d=b("<ul/>");if(this.items&&this.items.length>0){b.each(this.items,function(){var o=this;var p=b("<div/>").html(o.text);var n=b("<li/>").DhoverClass("hover").append(p).click(function(){m.SelectedChanged(o)});if(o.classes&&o.classes!=""){p.addClass(o.classes)}d.append(n)})}l.append(d)},items:[],setValue:function(d){},target:null}},j);var g=b(this);var e;if(f.vinputid){e=b("#"+f.vinputid)}if(f.selecteditem){g.val(f.selecteditem.text);if(e&&f.selecteditem.value){e.val(f.selecteditem.value)}}var h={height:18,"padding-top":"1px","padding-bottom":"1px"};g.css(h).addClass(f.cssClass).DhoverClass("hover");if(!f.dropwidth){f.dropwidth=g.outerWidth()}var i=b("<div/>").addClass(f.containerCssClass).css({position:"absolute","z-index":"999",overflow:"auto",width:f.dropwidth,display:"none",border:"solid 1px #555",background:"#fff"}).click(function(d){d.stopPropagation()}).appendTo(b("body"));if(f.autoheight){i.css("max-height",f.dropheight)}else{i.css("height",f.dropheight)}if(b.browser.msie){if(parseFloat(b.browser.version)<=6){var k=b("<div/>").css({position:"absolute","z-index":"-2",overflow:"hidden",height:"100%",width:"100%"});k.append(b('<iframe style="position:absolute;z-index:-1;width:100%;height:100%;top:0;left:0;scrolling:no;" frameborder="0" src="about:blank"></iframe>'));i.append(k)}}g.click(function(){var d=this;if(i.attr("isinited")!="true"){f.parse.items=f.items;if(f.selecteditem){f.parse.setValue.call(i,f.selecteditem)}f.parse.render(i);i.attr("isinited","true")}var n=a(g,f.dropwidth,f.dropheight);i.css(n);i.show();if(b.browser.msie){if(parseFloat(b.browser.version)<=6){var l=i.height();if(l>f.dropheight){i.height(f.dropheight)}}}b(document).one("click",function(m){i.hide()});return false});g.SelectedChanged=function(l){var d=true;if(f.selectedchange){d=f.selectedchange.apply(g,[l])}if(d!=false){g.val(l.text);if(e&&l.value){e.val(l.value)}}i.hide()};g.Cancel=function(){i.hide()};f.parse.target=g;return g}})(jQuery);